<%= render "layouts/navbar" %>

<!-- Image to replace radio button -->
<style>
	label > input.radio_hide {/* HIDE RADIO */
		visibility: hidden; /* Makes input not-clickable */
		position: absolute; /* Remove input from document flow */
	}
	label > input + img {/* IMAGE STYLES */
		cursor: pointer;
		border: 2px solid transparent;
	}
	label > input:checked + img {/* (RADIO CHECKED) IMAGE STYLES */
		border: 3px solid #f00;
	}

</style>

<div class="container" style="margin-top:100px; margin-bottom: 100px">

	<div class="row">
		<div class="col-md-8">
			<!-- Validation -->
			<% if @item.errors.any? %>
			<div id="error_explanation">
				<h4 class="no_bold" style="color: red"> Please fix these <b id="error_number" ><%= pluralize(@item.errors.count, "issue") %></b> before continue.</h2>
			</div>
			<% end %>

			<!-- Select Image -->
			<%= render 'select_image' %>

			<%= form_for :item, url: item_path(@item), method: :patch do |f| %>
			
			<!-- Select Filter -->
			<%= render partial: 'select_filter',  locals:{f: f} %>

			<!-- Select Product -->
			<%= render partial: 'select_product', locals:{f: f} %>

			<!-- Select Size -->
			<%= render partial: 'select_size', locals:{f: f} %>

			<!-- Select Depth and Border -->
			<%= render partial: 'select_depth_and_border', locals:{f: f}%>

		</div>
		<div class="col-md-4" >
			<!-- Image overview on right side -->
			<%= render partial: 'item_overview', locals: {f: f}%>
		</div>
		<% end %>
	</div>
</div>

<!-- Pop up Modal for crop -->
<% if !@crop_image.nil? && @crop_image %>
<%= render 'crop' %>
<% end %>

<script>
	$("#art_filter_checkbox").change(function() {
		if (this.checked) {
			//use original image
			$('#the_image').attr('src', '<%= @item.image.overview.url %>');
		} else {
			//use art filter
			$('#the_image').attr('src', '<%= @item.art_image.url %>');
		}
	});
	
	$("#product_canvas").click(function() {
		$('#product_choice').text('Type: canvas')
	});
	$("#product_frame").click(function() {
		$('#product_choice').text('Type: frame')
	});

	$("#item_size").change(function() {
		$('#size_choice').text('Size: ' + this.value)
	});

	$("#item_size").change(function() {
		$('#price_choice').text('Price: ' + $("#item_size option:selected").text().split(' ')[2])
	});

	$("#depth_0").click(function() {
		$('#depth_choice').text('Depth: 0"')
	});

	$("#depth_0_75").click(function() {
		$('#depth_choice').text('Depth: 0.75"')
	});

	$("#depth_1_5").click(function() {
		$('#depth_choice').text('Depth: 1.5"')
	});

	$("#depth_2_5").click(function() {
		$('#depth_choice').text('Depth: 2.5"')
	});
	$("#border_photo").click(function() {
		$('#border_choice').text('Border: photo')
	});

	$("#border_black").click(function() {
		$('#border_choice').text('Border: black')
	});

	$("#border_white").click(function() {
		$('#border_choice').text('Border: white')
	});

</script>
